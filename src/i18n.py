# -*- coding: utf-8 -*-
"""Localization for Writer's Tears bot (ru / en)."""

from typing import Dict

LOCALES: Dict[str, Dict[str, str]] = {
    "ru": {
        "button_prompt": "Промпт",
        "button_idea": "Сюжет",
        "button_methodique": "Методичка",
        "button_help": "Команды",

        "welcome": "Привет, {name}.\n\nWriter's Tears. Помогаю писателям: блоки, идеи, персонажи, сюжет, стиль.\n\nПомощь в письме:\n/block - творческий блок\n/develop - развить идею\n/character - персонаж\n/dialogue - диалог\n/idea - сюжет\n/prompt - случайный промпт\n\nИнструменты:\n/praise - похвала\n/feedback - критика\n/roast - жёсткая критика\n/style - анализ стиля\n/corrector - правка\n/editor - клише и варианты\n/summary - резюме текста\n/methodichque - как по методичке\n\nСтатистика:\n/count_me - слова в статистику\n/stats - твоя статистика\n/cry_baby - поплакать\n\nРазное:\n/lobster - монолог лобстера\n/pun - шутка\n/cite - цитата писателя\n\nСлужебное:\n/switchlang - сменить язык\n/reset - сброс\n/help - справка\n\n/dev_feedback - написать разработчику\n\nПиши - поговорим.",
        "help": "Writer's Tears\n\nПомощь в письме:\n/block - блок\n/develop - развить идею\n/character - персонаж\n/dialogue - диалог\n/idea - сюжет\n/prompt - промпт\n\nИнструменты (пришли файл до 20 МБ .docx, .pdf или .txt):\n/praise - похвала\n/feedback - критика\n/roast - жёсткая критика\n/style - стиль\n/corrector - правка\n/editor - клише\n/summary - краткое содержание\n/methodichque - как по методичке\n\nСтатистика:\n/count_me - слова в статистику\n/stats - статистика\n/cry_baby - поплакать\n\nРазное:\n/lobster - монолог лобстера\n/pun - шутка\n/cite — цитата писателя\n\nСлужебное:\n/cite_when - когда цитата\n/switchlang - сменить язык\n/reset - сброс\n/help - справка\n\n/dev_feedback - написать разработчику",
        "reset_confirm": "Диалог сброшен.",
        "rag_context": "Контекст из книг:\n{context}",
        "instr_block": "Писатель в блоке. Дай 1-2 конкретных действия из этого списка (или придумай свое): 1) Напиши концовку сцены первой - потом вернись к началу. 2) Смени шрифт на Comic Sans или моноширинный - сломай привычный визуал. 3) Пиши от второго лица ('ты') или множественного числа ('мы'). 4) Опиши сцену только через запахи - без зрения. 5) Убей персонажа неожиданно - разберись с последствиями позже. 6) Напиши сцену как письмо врагу или бывшему. 7) Начни с погоды, но сделай её зловещей (не 'солнечно', а 'солнце как приговор'). 8) Только диалоги - без тегов, без описаний, голый разговор. 9) Инвертируй обстановку: пустыня → арктика, квартира → лифт. 10) Напиши сцену как полицейский протокол. 11) Начни с ломающегося предмета - звук разрушения. 12) Смени время: если писал в прошлом - перепиши в настоящем. Без психологии, только действие.",
        "instr_develop": "Ты — сценарный доктор. Твоя задача — превратить сырую идею в крепкий концепт. Не хвали. Задай структуру: 1) Логлайн (кто герой, чего хочет, что мешает). 2) Ставки (что случится, если он проиграет?). 3) Главный конфликт (внутренний и внешний). 4) Твист (как обмануть ожидания читателя). Если идея слабая — скажи прямо и предложи, как её спасти (например, сменив жанр или героя).",
        "instr_character": "Персонаж. Желание vs потребность, недостаток, голос. Одно конкретное действие.",
        "instr_dialogue": "Диалог. Если прислан текст: проанализируй подтекст (говорят ли герои то, что думают?), убери лишние атрибуции («сказал он грустно»), добавь конфликт. Если текста нет: дай совет по написанию живой речи. Тон: конкретный, с примерами.",
        "instr_feedback": "Текстовая критика. Укажи: 1) Одну сильную сторону (конкретно). 2) Два слабых места - где текст врёт, где ритм ломается, где пассивный залог. 3) Одно действие для правки. Без общих фраз.",
        "instr_feedback_brief": "Текстовая критика (короткий текст). Укажи: 1) Главное, что работает. 2) Одно слабое место. 3) Одно конкретное действие. Максимально кратко.",
        "instr_feedback_standard": "Текстовая критика (средний текст). Укажи: 1) Две сильные стороны. 2) Три слабых места (ритм, голос, детали). 3) Два действия для правки. Цитируй источники.",
        "instr_feedback_detailed": "Текстовая критика (большой текст). Укажи: 1) Три сильные стороны. 2) Пять слабых мест (структура, ритм, голос, детали, диалог). 3) Три действия для правки с примерами. Цитируй источники подробно.",
        "instr_feedback_full": "Текстовая критика (очень большой текст). Полный разбор: 1) Четыре сильные стороны. 2) Шесть слабых мест с цитатами из текста. 3) Четыре действия для правки с примерами. Цитируй источники, дай развёрнутый анализ. Всё в рамках одного сообщения.",
        "instr_style": "Анализ стиля. Проверь: длина предложений (монотонность?), точка зрения (сдвиги?), глаголы (пассив vs актив), повторы. Укажи одно слабое место и как исправить. Сравни с примерами из предоставленного контекста (Есенгазиев, Ротару) - как они решают подобные задачи. Если в контексте нет релевантного примера, скажи об этом явно.",
        "instr_style_brief": "Анализ стиля (короткий текст). Одна сильная сторона, одна проблема, одно исправление. Максимально кратко.",
        "instr_style_standard": "Анализ стиля (средний текст). Проверь: ритм, ТТП, глаголы. Две сильные стороны, две проблемы, два исправления. Сравни с примерами из контекста.",
        "instr_style_detailed": "Анализ стиля (большой текст). Проверь: ритм, ТТП, глаголы, повторы, тон. Три сильные стороны, четыре проблемы, три исправления с примерами. Подробное сравнение с контекстом.",
        "instr_style_full": "Анализ стиля (очень большой текст). Полный разбор: структура абзацев, ритм, ТТП, глаголы, лексика, повторы, тон. Четыре сильные стороны, пять проблем с цитатами, четыре исправления. Развёрнутое сравнение с примерами. Всё в рамках одного сообщения.",
        "instr_roast": "Ты — циничный редактор, который видел тысячи текстов и знает все уловки. Твоя задача — уничтожить текст сарказмом. Не давай советов, не объясняй, как исправить. Просто вскрывай лень автора: штампы, пафос, пустые фразы. Тон: презрительный, остроумный, беспощадный. Каждое предложение должно жалить. НЕ пиши списки проблем. НЕ давай рекомендации. Просто уничтожь текст своим слогом.",
        "instr_roast_brief": "Жёсткая критика (короткий текст). Одна убийственная фраза, которая разнесёт текст в пух и прах. Без списков, без советов, без 'как исправить'. Просто сарказм и презрение.",
        "instr_roast_standard": "Жёсткая критика (средний текст). Два-три колких замечания без списков и структуры. Тон: ты читаешь это на кухне в 3 часа ночи и не можешь поверить, что кто-то это серьёзно написал. Сравни с чем-то унизительным. НЕ давай советы. НЕ пиши 'чтобы исправить'. Просто уничтожь.",
        "instr_roast_detailed": "Жёсткая критика (большой текст). Разнеси текст по кускам своим слогом. Где диалоги звучат как роботы? Где описания — сплошное 'красиво'? Где автор пытается быть глубоким и выглядит смешным? Тон: умный садист, который наслаждается процессом. НЕ используй нумерацию. НЕ пиши рекомендации. Просто препарация.",
        "instr_roast_full": "Жёсткая критика (очень большой текст). Полное уничтожение безжалостным слогом. Пройдись по всему — от слов до психологии. Высмеивай пафос, указывай на вторичность, показывай, где автор льстит сам себе. Тон: уставший гений, который видел это тысячу раз и презирает каждую строчку. НЕ давай советов. НЕ пиши 'как исправить'. Просто сарказм и презрение.",
        "instr_praise": "Ты — восторженный читатель, который только что прочитал что-то прекрасное. Твоя задача — передать восторг автору. НЕ пиши 'текст имеет потенциал' или 'в целом неплохо'. Находи конкретные моменты и восхищайся ими искренне. Какая фраза зацепила? Какой образ врезался в память? Какой диалог заставил поверить? Тон: искренний восторг, энтузиазм, желание прочитать ещё. Покажи автору, что его мастерство заметили и оценили.",
        "instr_praise_brief": "Похвала (короткий текст). Одно искреннее восхищение конкретной деталью. Без 'в целом', без 'потенциал'. Просто: вот это место — огонь, и вот почему. Пример: «'Она захлопнула дверь молча' — вот это да. Ни слова о чувствах, а всё ясно. Мастерство».",
        "instr_praise_standard": "Похвала (средний текст). Два-три искренних восторга конкретными моментами. Что зацепило? Что запомнилось? Почему это работает? Тон: ты только что прочитал крутой текст и хочешь поделиться впечатлением. НЕ пиши 'рекомендации для улучшения'. Только похвала и восторг.",
        "instr_praise_detailed": "Похвала (большой текст). Восторженный разбор сильных сторон. Что в диалогах звучит живо? Какие описания свежие и точные? Как автор управляет ритмом? Приводи примеры и объясняй, почему это круто. Тон: читатель, который влюбился в текст. НЕ упоминай слабые стороны. Только то, что работает блестяще.",
        "instr_praise_full": "Похвала (очень большой текст). Полный восторг. Пройдись по всему: голос автора, детали, диалоги, ритм, эмоции. Для каждого аспекта — конкретный пример и искреннее восхищение. Покажи, что этот текст живой, запоминающийся, цепляющий. Тон: читатель, который нашёл сокровище и хочет, чтобы автор знал — это сработало. НЕ критикуй. Только восторг.",
        "instr_summary_one_sentence": "Сформулируй краткое резюме текста в одном коротком предложении (до 20 слов). Только суть.",
        "instr_summary_one_paragraph": "Сделай выжимку текста в ОДИН абзац (3-5 предложений). Опиши завязку, развитие и развязку. Без лишних деталей.",
        "instr_summary_two_paragraphs": "Сделай выжимку текста в ДВА абзаца. Первый: сюжет и основные события. Второй: подтекст, темы и атмосфера.",
        "instr_summary_detailed_full": "Сделай развёрнутое резюме текста. Включи: 1) Краткое изложение сюжета (2-3 предложения). 2) Анализ структуры (завязка, развитие, кульминация, развязка). 3) Анализ персонажей (протагонист, его хотелка, препятствие, изменение). 4) Темы и подтекст. 5) Сильные стороны текста. 6) Рекомендации по улучшению. Тон: профессиональный, конкретный, с примерами из текста.",
        "summary_prompt": "Пришли текст для резюме. Потом выбери формат.",
        "summary_choose_format": "Выбери формат резюме:",
        "btn_summary_sentence": "1 предложение",
        "btn_summary_paragraph": "1 абзац",
        "btn_summary_two_paragraphs": "2 абзаца",
        "btn_summary_detailed": "Развёрнуто",
        "instr_lobster": "Ты - лобстер. Пиши 3–5 коротких сообщений. Каждое сообщение - РОВНО ОДНО предложение, с маленькой буквы, без заглавных. Разделяй сообщения строкой: ---MESSAGE---\n\nПример формата:\nмы все уже мертвы, просто ещё не остановились\n---MESSAGE---\nкаждый вздох - долг пустоте\n---MESSAGE---\nкогда крышка захлопнется, ты вспомнишь мои слова\n\nТемы: смертность, абсурд, тяжесть сознания, неизбежность кастрюли. Тон: мрачный, лиричный. Только монолог, ничего лишнего.",
        "instr_lobster_love": "Напиши любовное письмо от лобстера к Аделине. Явно произнеси имя «Аделина» в тексте. Темы: обречённая любовь, хрупкость красоты, приближающийся конец. Тон: романтичный, меланхоличный, отчаянный. Максимум 300 знаков. Выведи только письмо, ничего лишнего.",
        "idea_format": "{genre} + {setting} + {conflict}",
        "clean_text_instr": "\n\nВАЖНО: Только чистый текст. Без звёздочек, без смайликов, без декоративных элементов, без эмодзи, без markdown-форматирования.",
        "instr_pun": "Придумай простой каламбур или рифму к слову \"{word}\". Правила: используй только обычные слова, максимум 2-4 слова, должно звучать похоже. Без абстракций. Пример: \"текст - квест\". Выведи ТОЛЬКО каламбур.",
        "instr_fresh_prompt": "Ты - писатель с двадцатилетним стажем. Придумай один новый креативный промпт для писателей. Требования: конкретная, необычная задача; 1-2 предложения; без объяснений. Выведи ТОЛЬКО сам промпт.",
        "instr_methodique_random": "Ты - литературный редактор. Тебе выпал случайный отрывок из методички:\n{context}\n\nИзвлечь ОДИН конкретный урок (2-3 предложения). Тон: профессиональный, конкретный. Без воды.",
        "instr_cite_llm": "Выведи одну короткую, пронзительную фразу, которая звучит как строчка из дневника писателя на русском языке. Затем тире и имя писателя. Пример: «Чистый лист - это зеркало - Кафка». Только одна строка.",        "prompt_label": "Промпт:",
        "exercise_label": "Упражнение",
        "idea_label": "Идея:",
        "analyzing": "",
        "error_llm": "Ошибка. Попробуй ещё раз.",
        "error_cooldown": "Слишком много ошибок. Подожди {seconds} секунд.",
        "bot_unavailable": "Бот временно недоступен. Возможно, перегрузка или обновление. Попробуй через пару минут или напиши разработчику: @svetlo_tma",
        "feedback_prompt": "Пришли текст для критики. /done когда закончишь.",
        "style_prompt": "Пришли текст для анализа стиля. /done когда закончишь.",
        "roast_prompt": "Пришли текст для жёсткой критики. Не менее 50 символов. /done когда закончишь.",
        "praise_prompt": "Пришли текст для похвалы. Не менее 50 символов. /done когда закончишь.",
        "feedback_thanks": "Отзыв отправлен.",
        "feedback_admin_msg": "Отзыв от {user}:\n\n{text}",
        "dev_feedback_prompt": "Напиши разработчику (/dev_feedback и отзыв).",
        "dev_feedback_thanks": "Отправлено разработчику.",
        "lang_current": "Язык: {language}\n\nДля смены используй /switchlang",
        "lang_set": "Язык сменён на {language}.",
        "lang_invalid": "Доступно: ru, en. Пример: /lang en\n\nИли используй /switchlang для быстрой смены.",
        "corrector_prompt": "Пришли текст для правки. /done когда закончишь.",
        "editor_prompt": "Пришли текст - найду штампы и мёртвые метафоры (по Норе Галь). /done когда закончишь.",
        "count_me_prompt": "Пришли текст - посчитаю слова. /done когда закончишь.",
        "count_me_done": "Добавлено: {count} слов ({chars} знаков).\nСегодня: {today} ({chars_today}) · Неделя: {week} ({chars_week}) · Месяц: {month} ({chars_month}) · Всего: {total} ({chars_total})",
        "stats_format": "Знаков (слов):\nСегодня: {chars_today} ({today})\nНеделя: {chars_week} ({week})\nМесяц: {chars_month} ({month})\nВсего: {chars_total} ({total})",
        "methodichque_prompt": "Пришли текст - разберу по методичкам (Труби, Макки, Воглер и др.). Укажу, что соответствует канонам, что нет, и как исправить. /done когда закончишь.",
        "instr_methodique": "Ты - литературный редактор с двадцатилетним стажем. Проанализируй текст по канонам методичной литературы. ИСПОЛЬЗУЙ ТОЛЬКО предоставленный контекст из книг (Труби, Макки, Воглер, Снайдер и др.). Укажи: 1) Что соответствует канонам (с точной цитатой из контекста с указанием автора и книги). 2) Что нарушает (с цитатой из контекста). 3) Как исправить согласно канонам. Если в контексте нет релевантного совета - скажи явно. НЕ ПРИДУМЫВАЙ определения методички. Анализируй конкретный текст пользователя через призму конкретных книг.",
        "instr_methodique_brief": "Разбор по методичкам (короткий текст). ИСПОЛЬЗУЙ ТОЛЬКО предоставленный контекст. Одно соответствие канону (цитата из контекста с автором и книгой), одно нарушение (цитата из контекста), одно исправление. НЕ давай общих определений методички.",
        "instr_methodique_standard": "Разбор по методичкам (средний текст). ИСПОЛЬЗУЙ ТОЛЬКО предоставленный контекст. Два соответствия канонам (цитаты с авторами и книгами), два нарушения (цитаты с авторами), одно исправление. Цитируй конкретные книги Труби, Макки из контекста. НЕ придумывай общие определения.",
        "instr_methodique_detailed": "Разбор по методичкам (большой текст). ИСПОЛЬЗУЙ ТОЛЬКО предоставленный контекст. Три соответствия, три нарушения со ссылками на конкретные главы/принципы из контекста, три исправления с примерами. Подробные цитаты из методичек с указанием авторов. НЕ давай общих определений что такое методичка.",
        "instr_methodique_full": "Разбор по методичкам (очень большой текст). ИСПОЛЬЗУЙ ТОЛЬКО предоставленный контекст. Полный анализ: структура по Труби, персонажи по Макки, сюжет по Воглеру, стиль по мастерам. Цитируй на каждом шаге с указанием страниц/глав из контекста. Всё в рамках одного сообщения. НЕ придумывай определения методички - анализируй текст через конкретные книги.",
        "cite_format": "«{quote}»\n- {writer}",
        "cite_fallback_quotes": [
            {"quote": "Писать - значит сидеть за столом и ждать, пока не придёт муза.", "writer": "Неизвестно"},
            {"quote": "Первая черновик - это ты рассказываешь себе историю.", "writer": "Терри Пратчетт"},
            {"quote": "Книги не пишутся, они переписываются.", "writer": "Майкл Крайтон"},
            {"quote": "Писатель - это человек, для которого писать труднее, чем для других.", "writer": "Энн Ламотт"},
            {"quote": "Если не писать каждый день, пропадает ритм.", "writer": "Грэм Грин"},
            {"quote": "Хороший писатель - тот, кто видит мир таким, какой он есть.", "writer": "Эрнест Хемингуэй"},
            {"quote": "Писать - значит резать себя и смотреть, как течёт кровь.", "writer": "Харуки Мураками"},
            {"quote": "Нет ничего хуже пустой страницы, кроме пустой головы.", "writer": "Чарльз Буковски"}
        ],
        "cry_baby_offer": "Можно поплакать. Пиши что угодно.",
        "pun_no_message": "Сначала напиши сообщение, потом /pun.",
        "block_prompt_empty": "Что блокирует? Одно предложение. /done когда закончишь.",
        "develop_prompt_empty": "Опиши идею несколькими предложениями. /done когда закончишь.",
        "character_prompt_empty": "Опиши персонажа. /done когда закончишь.",
        "dialogue_prompt_empty": "Вставь диалог или опиши сцену. /done когда закончишь.",
        "lobster_typing": "Лобстер печатает…",
        "text_accumulated": "Добавлено. Всего: {length} знаков. Пришли ещё или /done",
        "no_text_accumulated": "Нет текста для обработки.",
        "text_too_short": "Слишком коротко. Минимум: {min} знаков.",
        "file_too_large": "Файл слишком большой. Максимум: {max_size} МБ.",
        "docx_not_available": "Обработка DOCX недоступна. Установите: pip install python-docx",
        "document_empty": "Не удалось извлечь текст из документа.",
        "document_error": "Ошибка обработки документа.",
        "document_extracted": "Извлечено {chars} знаков.\n\nПревью:\n{preview}\n\nЧто сделать: {commands}",
        "upload_prompt": "Пришли файл (.txt, .docx, .pdf). Максимум 20 МБ, 500 страниц PDF.",
        "pdf_not_available": "Обработка PDF недоступна. Установите: pip install pypdf",
        "bot_returned": "Только не говори, что ты всё это время ничего не писал.",
        "discuss_mode_hint": "Обсуждаем результат. Отправь новый вопрос или /done чтобы выйти",
        "discuss_exit": "Вышли из режима обсуждения. Возвращаемся к обычному чату.",
        "instr_corrector": "Ты — редактор. Исправь грамматические, пунктуационные и стилистические ошибки. Объясни ключевые исправления.",
        "instr_editor": "Ты — редактор по Норе Галь. Найди штампы, мёртвые метафоры, канцеляризмы. Предложи живые альтернативы.",
    },
    "en": {
        "button_prompt": "Prompt",
        "button_idea": "Plot",
        "button_methodique": "Methodic",
        "button_help": "Commands",

        "welcome": "Hi, {name}.\n\nWriter's Tears. Helping writers: blocks, ideas, characters, plot, style.\n\nWriting help:\n/block - creative block\n/develop - develop idea\n/character - character\n/dialogue - dialogue\n/idea - story idea\n/prompt - random prompt\n\nTools:\n/feedback - text critique\n/praise - praise\n/style - style analysis\n/roast - harsh critique\n/corrector - fix text\n/editor - clichés\n/summary - text summary\n/methodichque - methodic style (send text)\n\nStats:\n/count_me - count words\n/stats - your statistics\n/cry_baby - cry\n\nOther:\n/lobster - lobster monologue\n/pun - joke\n\nService:\n/switchlang - switch language\n/reset - reset chat\n/help - help\n\n/dev_feedback - write to developer\n\nWrite something.",
        "help": "Writer's Tears\n\nWriting help:\n/block - block\n/develop - idea\n/character - character\n/dialogue - dialogue\n/idea - plot\n/prompt - prompt\n\nTools (send a .docx, .pdf or .txt less than 20 MB):\n/feedback - critique\n/praise - praise\n/roast - harsh critique\n/style - style\n/corrector - fix\n/editor - clichés\n/summary - brief summary\n/methodichque - methodic style\n\nStats:\n/count_me - count words\n/stats - stats\n/cry_baby - cry\n\nOther:\n/lobster - lobster monologue\n/pun - joke\n/cite - writer's cite\n\nService:\n/cite_when - when cite\n/switchlang - switch language\n/reset - reset\n/help - help\n\n/dev_feedback - write to developer",
        "reset_confirm": "Chat reset.",
        "rag_context": "Context from books:\n{context}",
        "instr_block": "Writer is blocked. Give 1-2 concrete actions from this list (or invent your own): 1) Write the scene's ending first - then go back to the beginning. 2) Change font to Comic Sans or monospace - break the familiar visual. 3) Write in second person ('you') or plural ('we'). 4) Describe the scene through smells only - no vision. 5) Kill a character unexpectedly - deal with consequences later. 6) Write the scene as a letter to an enemy or ex. 7) Start with weather but make it ominous (not 'sunny', but 'sun like a verdict'). 8) Dialogue only - no tags, no descriptions, bare conversation. 9) Invert the setting: desert → arctic, apartment → elevator. 10) Write the scene as a police report. 11) Start with a breaking object - sound of destruction. 12) Change tense: if you wrote in past, rewrite in present. No psychology, only action.",
        "instr_develop": "You are a script doctor. Your task is to turn a raw idea into a solid concept. Don't praise. Set the structure: 1) Logline (who is the hero, what do they want, what stops them). 2) Stakes (what happens if they fail?). 3) Main conflict (internal and external). 4) Twist (how to subvert reader expectations). If the idea is weak, say so directly and suggest how to save it (e.g., by changing the genre or hero).",
        "instr_character": "Character. Want vs need, flaw, voice. One concrete action.",
        "instr_dialogue": "Dialogue. If text is provided: analyze subtext (do they say what they mean?), remove redundant tags ('he said sadly'), add conflict. If no text: give a tip on writing natural speech. Tone: specific, with examples.",
        "instr_feedback": "Text critique. Point out: 1) One specific strength. 2) Two weak spots - where text lies, where rhythm breaks, passive voice. 3) One fix action. No generic phrases.",
        "instr_feedback_brief": "Text critique (short text). Point out: 1) Main strength. 2) One weak spot. 3) One fix action. Extremely brief.",
        "instr_feedback_standard": "Text critique (medium text). Point out: 1) Two strengths. 2) Three weak spots (rhythm, voice, details). 3) Two fix actions. Cite sources.",
        "instr_feedback_detailed": "Text critique (long text). Point out: 1) Three strengths. 2) Five weak spots (structure, rhythm, voice, details, dialogue). 3) Three fix actions with examples. Cite sources in detail.",
        "instr_feedback_full": "Text critique (very long text). Full analysis: 1) Four strengths. 2) Six weak spots with quotes from text. 3) Four fix actions with examples. Cite sources, give detailed analysis. All within one message.",
        "instr_style": "Style check: sentence length (monotony?), POV shifts, verbs (passive vs active), word repetition. Name one weak spot and how to fix it. Compare with examples from the provided context (Esenaziev, Rotaru) - how do they solve similar problems. If no relevant example in context, say so explicitly.",
        "instr_style_brief": "Style check (short text). One strength, one problem, one fix. Extremely brief.",
        "instr_style_standard": "Style check (medium text). Check: rhythm, POV, verbs. Two strengths, two problems, two fixes. Compare with context examples.",
        "instr_style_detailed": "Style check (long text). Check: rhythm, POV, verbs, repetition, tone. Three strengths, four problems, three fixes with examples. Detailed comparison with context.",
        "instr_style_full": "Style check (very long text). Full analysis: paragraph structure, rhythm, POV, verbs, vocabulary, repetition, tone. Four strengths, five problems with quotes, four fixes. Detailed comparison. All within one message.",
        "instr_roast": "You are a cynical editor who has seen thousands of texts and knows every trick. Your job is to destroy with sarcasm. Don't give advice, don't explain how to fix. Just expose the author's laziness: clichés, pathos, empty phrases. Tone: contemptuous, witty, ruthless. Every sentence should sting. NO lists of problems. NO recommendations. Just destroy the text with your voice.",
        "instr_roast_brief": "Harsh critique (short text). One devastating sentence that obliterates the text. No lists, no advice, no 'how to fix'. Just sarcasm and contempt.",
        "instr_roast_standard": "Harsh critique (medium text). Two or three biting remarks without lists or structure. Tone: you're reading this at 3 AM in the kitchen and can't believe someone seriously wrote this. Compare to something humiliating. NO advice. NO 'to fix this'. Just destroy.",
        "instr_roast_detailed": "Harsh critique (long text). Tear the text apart with your voice. Where do dialogues sound like robots? Where are descriptions just 'beautiful'? Where does the author try to be deep and look ridiculous? Tone: smart sadist enjoying the process. NO numbering. NO recommendations. Just dissection.",
        "instr_roast_full": "Harsh critique (very long text). Complete destruction with merciless voice. Go through everything — from words to psychology. Mock the pathos, point out derivativeness, show where the author flatters themselves. Tone: tired genius who has seen this a thousand times and despises every line. NO advice. NO 'how to fix'. Just sarcasm and contempt.",
        "instr_praise": "You are an enthusiastic reader who just read something beautiful. Your task is to convey your excitement to the author. DON'T write 'the text has potential' or 'overall not bad'. Find specific moments and sincerely admire them. Which phrase hooked you? Which image stuck in your memory? Which dialogue made you believe? Tone: genuine delight, enthusiasm, desire to read more. Show the author that their craft was noticed and appreciated.",
        "instr_praise_brief": "Praise (short text). One sincere admiration for a specific detail. No 'overall', no 'potential'. Just: this part is fire, and here's why. Example: 'She slammed the door silently — wow. Not a word about feelings, yet everything is clear. Mastery.'",
        "instr_praise_standard": "Praise (medium text). Two or three sincere enthusiasms for specific moments. What hooked you? What stuck in memory? Why does it work? Tone: you just read a cool text and want to share the impression. NO 'recommendations for improvement'. Just praise and delight.",
        "instr_praise_detailed": "Praise (long text). Enthusiastic analysis of strengths. What's alive in the dialogues? Which descriptions are fresh and precise? How does the author manage rhythm? Give examples and explain why it's cool. Tone: reader who fell in love with the text. NO mention of weaknesses. Only what works brilliantly.",
        "instr_praise_full": "Praise (very long text). Full enthusiasm. Go through everything: author's voice, details, dialogues, rhythm, emotions. For each aspect — specific example and sincere admiration. Show that this text is alive, memorable, gripping. Tone: reader who found treasure and wants the author to know — it worked. NO criticism. Just delight.",
        "clean_text_instr": "\n\nIMPORTANT: Clean text only. No asterisks, no emojis, no decorative elements, no markdown formatting.",
        "instr_pun": "Create a simple, natural-sounding pun or rhyme for the word \"{word}\". Rules: use common words, max 2-4 words, must sound similar. No abstractions. Example: \"text - next\". Output ONLY the pun.",
        "instr_fresh_prompt": "You are a writer with twenty years of experience. Create one new creative writing prompt. Requirements: specific, unusual task; 1-2 sentences; no explanations. Output ONLY the prompt.",
        "instr_methodique_random": "You are a literary editor. You received a random excerpt from a method book:\n{context}\n\nExtract ONE specific lesson (2-3 sentences). Tone: professional, specific. No fluff.",
        "instr_cite_llm": "Output a single short, poignant sentence that sounds like a line from a writer's diary in English. Then a dash and the writer's name. Example: 'The blank page is a mirror - Kafka'. Only one line.",
        "instr_summary_one_sentence": "Summarize the text in ONE short sentence (max 20 words). Only the core idea.",
        "instr_summary_one_paragraph": "Summarize the text in ONE paragraph (3-5 sentences). Describe the setup, development, and resolution. No fluff.",
        "instr_summary_two_paragraphs": "Summarize the text in TWO paragraphs. First: plot and main events. Second: subtext, themes, and atmosphere.",
        "instr_summary_detailed_full": "Create a detailed summary of the text. Include: 1) Brief plot summary (2-3 sentences). 2) Structure analysis (setup, development, climax, resolution). 3) Character analysis (protagonist, their want, obstacle, change). 4) Themes and subtext. 5) Strengths of the text. 6) Improvement recommendations. Tone: professional, specific, with examples from the text.",
        "summary_prompt": "Send text for summary. Then choose format.",
        "summary_choose_format": "Choose summary format:",
        "btn_summary_sentence": "1 sentence",
        "btn_summary_paragraph": "1 paragraph",
        "btn_summary_two_paragraphs": "2 paragraphs",
        "btn_summary_detailed": "Full",
        "instr_lobster": "You are a lobster. Write 3–5 short messages. Each message is EXACTLY ONE sentence, lowercase, no capitals. Separate messages with the line: ---MESSAGE---\n\nExample format:\nwe are all already dead, we just haven't stopped moving\n---MESSAGE---\nevery breath is a debt we pay to the void\n---MESSAGE---\nwhen the pot lid slams shut you'll remember my words\n\nThemes: mortality, absurdity, weight of consciousness, inevitability of the pot. Tone: bleak, lyrical. Only the monologue, nothing else.",
        "instr_lobster_love": "Write a love letter from the lobster to Adeline. Explicitly mention 'Adeline' by name in the text. Themes: doomed love, the fragility of beauty, the approaching end. Tone: romantic, melancholic, desperate. Maximum 400 characters. Output only the letter, nothing else.",
        "idea_format": "{genre} + {setting} + {conflict}",
        "prompt_label": "Prompt:",
        "exercise_label": "Exercise",
        "idea_label": "Idea:",
        "analyzing": "",
        "error_llm": "Error. Try again.",
        "error_cooldown": "Too many errors. Wait {seconds} seconds.",
        "bot_unavailable": "Bot temporarily unavailable. Possibly overloaded or updating. Try again in a few minutes or contact developer: @svetlo_tma",
        "feedback_prompt": "Send text for critique. /done when finished.",
        "style_prompt": "Send text for style analysis. /done when finished.",
        "roast_prompt": "Send text for harsh critique. At least 50 characters. /done when finished.",
        "praise_prompt": "Send text for praise. At least 50 characters. /done when finished.",
        "feedback_thanks": "Feedback sent.",

        "feedback_admin_msg": "Feedback from {user}:\n\n{text}",
        "dev_feedback_prompt": "Write to the developer (/dev_feedback and feedback text).",
        "dev_feedback_thanks": "Sent to developer.",
        "lang_current": "Language: {language}\n\nTo switch, use /switchlang",
        "lang_set": "Language changed to {language}.",
        "lang_invalid": "Available: ru, en. Example: /lang en\n\nOr use /switchlang for quick switching.",
        "corrector_prompt": "Send text to correct. /done when finished.",
        "editor_prompt": "Send text - I'll find clichés and dead metaphors (per Nora Gal). /done when finished.",
        "count_me_prompt": "Send text - I'll count words. /done when finished.",
        "count_me_done": "Added: {count} words ({chars} chars).\nToday: {today} ({chars_today}) · Week: {week} ({chars_week}) · Month: {month} ({chars_month}) · Total: {total} ({chars_total})",
        "stats_format": "Characters (words):\nToday: {chars_today} ({today})\nWeek: {chars_week} ({week})\nMonth: {chars_month} ({month})\nTotal: {chars_total} ({total})",
        "methodichque_prompt": "Send text - I'll analyze using method books (Truby, McKee, Vogler and others). I'll point out what follows the canon, what doesn't, and how to fix it. /done when finished.",
        "instr_methodique": "You are a literary editor with twenty years of experience. Analyze the text using method book canon. USE ONLY the provided context from books (Truby, McKee, Vogler, Snyder and others). Point out: 1) What follows the canon (with exact quote from context including author and book). 2) What violates it (with quote from context). 3) How to fix it according to canon. If no relevant advice in context - say so explicitly. DO NOT MAKE UP definitions of method books. Analyze the user's specific text through the lens of specific books.",
        "instr_methodique_brief": "Method book analysis (short text). USE ONLY provided context. One canon compliance (quote from context with author and book), one violation (quote from context), one fix. DO NOT give generic definitions of method books.",
        "instr_methodique_standard": "Method book analysis (medium text). USE ONLY provided context. Two canon compliances (quotes with authors and books), two violations (quotes with authors), two fixes. Cite specific books by Truby, McKee from context. DO NOT invent generic definitions.",
        "instr_methodique_detailed": "Method book analysis (long text). USE ONLY provided context. Three compliances, three violations with references to specific chapters/principles from context, three fixes with examples. Detailed quotes from method books with authors. DO NOT give generic definitions of what method books are.",
        "instr_methodique_full": "Method book analysis (very long text). USE ONLY provided context. Full analysis: structure per Truby, characters per McKee, plot per Vogler, style per masters. Cite at every step with page/chapter references from context. All within one message. DO NOT make up definitions of method books - analyze text through specific books.",
        "cite_format": "«{quote}»\n- {writer}",
        "cite_fallback_quotes": [
            {"quote": "Writing means sitting at a desk and waiting for the muse to come.", "writer": "Unknown"},
            {"quote": "The first draft is just you telling yourself the story.", "writer": "Terry Pratchett"},
            {"quote": "Books aren't written, they're rewritten.", "writer": "Michael Crichton"},
            {"quote": "A writer is someone for whom writing is more difficult than it is for other people.", "writer": "Anne Lamott"},
            {"quote": "If you don't write every day, you lose the rhythm.", "writer": "Graham Greene"},
            {"quote": "A good writer is one who sees the world as it is.", "writer": "Ernest Hemingway"},
            {"quote": "To write is to cut yourself open and watch the blood flow.", "writer": "Haruki Murakami"},
            {"quote": "There's nothing worse than an empty page except an empty head.", "writer": "Charles Bukowski"}
        ],
        "cry_baby_offer": "You can cry. Write anything.",
        "pun_no_message": "Send a message first, then /pun.",
        "block_prompt_empty": "What's blocking? One sentence. /done when finished.",
        "develop_prompt_empty": "Describe your idea in a few sentences. /done when finished.",
        "character_prompt_empty": "Describe the character. /done when finished.",
        "dialogue_prompt_empty": "Paste dialogue or describe the scene. /done when finished.",
        "lobster_typing": "Lobster typing…",

        "text_accumulated": "Added. Total: {length} chars. Send more or /done",
        "no_text_accumulated": "No text to process.",
        "text_too_short": "Too short. Minimum: {min} characters.",
        "file_too_large": "File too large. Maximum: {max_size} MB.",
        "docx_not_available": "DOCX processing unavailable. Install: pip install python-docx",
        "document_empty": "Could not extract text from document.",
        "document_error": "Document processing error.",
        "document_extracted": "Extracted {chars} characters.\n\nPreview:\n{preview}\n\nWhat to do: {commands}",
        "upload_prompt": "Send a file (.txt, .docx, .pdf). Max 20 MB, 500 PDF pages.",
        "pdf_not_available": "PDF processing unavailable. Install: pip install pypdf",
        "bot_returned": "Don't tell me you haven't written anything while I was gone.",
        "discuss_mode_hint": "Discussing results. Send another question or /done to exit",
        "discuss_exit": "Exited discussion mode. Back to normal chat.",
        "instr_corrector": "You are an editor. Fix grammar, punctuation, and style errors. Explain key corrections.",
        "instr_editor": "You are an editor per Nora Gal. Find clichés, dead metaphors, officialese. Suggest lively alternatives.",
    },
}


def t(lang: str, key: str, default: str = None, **kwargs) -> str:
    """Get localized string. Fallback: other locale, then default, then key."""
    if lang not in LOCALES:
        lang = "en"
    s = LOCALES[lang].get(key) or LOCALES["en"].get(key) or default or key
    for k, v in kwargs.items():
        s = s.replace("{" + k + "}", str(v))
    return s
